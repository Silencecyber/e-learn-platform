{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Profile</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<link href="{% static 'css/footer.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/table.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/profile.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'icon.ico' %}" rel="shortcut icon" type="image/x-icon" />
    <link href="{% static 'icon.ico' %}" rel="apple-touch-icon" />
 <style>


   .popover-header
   {

      background:white;
      margin-top:0;
   }
 </style>


  </head>
  <body>
    <div class="navbar-logo-left wf-section">
      <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-logo-left-container shadow-three w-nav">
        <div class="container">
          <div class="navbar-wrapper">
            <a href="{% url 'about' %}" class="navbar-brand w-nav-brand">
              <h3>E-learn</h3>
            </a>
            <nav role="navigation" class="nav-menu-wrapper w-nav-menu">
              <ul role="list" class="nav-menu-two w-list-unstyled">
                <li>
                  <a href="{% url 'plattform:home' %}" class="nav-link">Home</a>
                </li>
                <li>
                  <a href="{% url 'plattform:profile' %}" class="nav-link">Profile</a>
                </li>


                {% if is_teacher %}
                                <li>
                                  <a href="{% url 'plattform:courses' %}" class="nav-link">Courses</a>
                                </li>
                                <li>
                                  <a href="{% url 'plattform:students' %}" class="nav-link">Students</a>
                                </li>
                                <li>
                                  <a href="{% url 'plattform:teachers' %}" class="nav-link">Teachers</a>
                                </li>
                {% endif %}

                <li>
                   <form action="{% url 'plattform:logout' %}" method="POST">
                    {% csrf_token %}
                    <input type="submit" class="nav-link" style="border:none;background:none;" value="Logout">

                  </form>
                </li>
              </ul>
            </nav>
            <div class="menu-button w-nav-button">
              <div class="w-icon-nav-menu"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <section class="combine-section_team4" style="background-color:#f2f3f7;">
      <div class="combine-padding-global-2">
        <div class="combine-padding-section-medium-2">
          <div class="combine-container-small-2">
            <div class="combine-text-align-center-2">
              <h2 class="combine-heading-style-h2-2">Profile</h2>
            </div>
          </div>
          <div class="combine-space-large-2"></div>
          <div class="combine-container-large-2">
            <div class="combine-team4_component">
              <div class="combine-team4_item">
                <div id="w-node-aafc5602-9e6c-a399-0d9e-d49edc49e9bf-2e1de73d" class="combine-team4_image-wrapper">
                  <img src="{% if profile.image %}/media/{{ profile.image }} {% else %}{% static 'images/default_image_profile.png' %}{% endif %}" loading="lazy" sizes="(max-width: 479px) 93vw, (max-width: 767px) 46vw, (max-width: 991px) 240px, 23vw"  alt="woman avatar" class="combine-team4_image" />
                </div>
                <div class="combine-team4_content">
                  <h3 class="combine-heading-style-h6">{{ profile.first_name }} {{ profile.last_name }}</h3>
                  <div id="w-node-aafc5602-9e6c-a399-0d9e-d49edc49e9c4-2e1de73d" class="combine-team4_job-title">status: {% if profile.is_teacher %} teacher {% else %} student {% endif %} <br />username: {{ user.username }} </div>
                  <div class="combine-text-size-regular-2">
                    <strong>About:</strong>
                    <br />{% if profile.about %} {{ profile.about }} {% else %} No data {% endif %}
                  </div>
                </div>
              </div>
            </div>
           {% if is_teacher %}
            {% if courses_data %}
               <div class="table-wrapper">
        <div class="table-row head">
          <div class="div-block-406"></div>
          <div class="table-box">
            <div class="table-heading">Course</div>
          </div>
          <div class="table-box">
            <div class="table-heading">Topics completed</div>
          </div>
          <div class="table-box">
            <div class="table-heading">Quizes (result=100%)</div>
          </div>
          <div class="table-box">
            <div class="table-heading">Quizes (50%&lt;result&lt;100%)</div>
          </div>
          <div class="table-box _11">
            <div class="table-heading">Quizes (result&lt;=50%)</div>
          </div>
          <div class="table-box action">
            <div class="table-heading">Progress</div>
          </div>

        </div>
        <div class="table-container">
          <div class="table-data-wrapper">
            <div class="scroll-container">
              <div class="scroll-table-content">
                <div class="table-row head hide">
                  <div class="div-block-406"></div>
                  <div class="table-box">
                    <div class="table-heading">Course</div>
                  </div>
                  <div class="table-box">
                    <div class="table-heading">Topics completed</div>
                  </div>
                  <div class="table-box">
                    <div class="table-heading">Quizes (result=100%)</div>
                  </div>
                  <div class="table-box">
                    <div class="table-heading">Quizes (50%&lt;result&lt;100%)</div>
                  </div>
                  <div class="table-box _11">
                    <div class="table-heading">Quizes (result&lt;=50%)</div>
                  </div>
                  <div class="table-box action">
                    <div class="table-heading">Progress</div>
                  </div>

                </div>

<!--                start row-->
                {% for course in courses_data %}
                <div class="table-row">
                  <div class="div-block-406 _2">
                    <div class="table-row-nr">{{ forloop.counter }}</div>
                  </div>
                  <div class="table-box _2">
                    <div class="table-data name"><a href="{% url 'plattform:course_detail' pk=course.course.id %}" class=" table-data link">{{ course.course.name }}</a></div>
                  </div>
                  <div class="table-box _2">
                    <a href="#" class="table-data" data-bs-toggle="popover"  data-bs-html=true  data-bs-title="Completed topics" data-bs-content="{% if course.topics_completed.names %}{% for  topic in course.topics_completed.names  %}• <a  class='link-secondary' href='{% url 'plattform:topic_detail' pk=topic.id %}'>{{ topic.name }}</a><br>{% endfor %}{% else %} No topics {% endif %} " >{{ course.topics_completed.amount }}</a>
                  </div>
                  <div class="table-box _2">
                    <a href="#" class="table-data" data-bs-toggle="popover"  data-bs-html=true  data-bs-title="result=100%" data-bs-content="{% if course.quizes_passed.names %}{% for  quiz in course.quizes_passed.names  %}• <a  class='link-secondary' href='{% url 'plattform:quiz' module_id=quiz.quiz.module.id quiz_id=quiz.quiz.id %}'>{{ quiz.quiz.name }} - {{ quiz.result.result }}%</a><br>{% endfor %}{% else %} No quizes {% endif %} ">{{ course.quizes_passed.amount }}</a>
                  </div>
                  <div class="table-box _2">
                    <a href="#" class="table-data" data-bs-toggle="popover"  data-bs-html=true  data-bs-title="Between 50 and 100 percent" data-bs-content="{% if course.quizes_between_50_100.names %}{% for  quiz in course.quizes_between_50_100.names  %}• <a  class='link-secondary' href='{% url 'plattform:quiz' module_id=quiz.quiz.module.id quiz_id=quiz.quiz.id %}'>{{ quiz.quiz.name }} - {{ quiz.result.result }}%</a><br>{% endfor %}{% else %} No quizes {% endif %} " >{{ course.quizes_between_50_100.amount }}</a>
                  </div>
                  <div class="table-box _2 small">
                    <a href="#" class="table-data" data-bs-toggle="popover"  data-bs-html=true  data-bs-title="Less than or equals 50 percent" data-bs-content="{% if course.quizes_lte_50.names %}{% for  quiz in course.quizes_lte_50.names  %}• <a  class='link-secondary' href='{% url 'plattform:quiz' module_id=quiz.quiz.module.id quiz_id=quiz.quiz.id %}'>{{ quiz.quiz.name }} - {{ quiz.result.result }}%</a><br>{% endfor %}{% else %} No quizes {% endif %} ">{{ course.quizes_lte_50.amount }}</a>
                  </div>
                  <div class="table-box _2 action">
                    <span  class="table-data ">{{ course.progress }}%</span>
                  </div>
                </div>
<!--                  end row-->
                {% endfor %}

              </div>
            </div>
          </div>
        </div>
      </div>
            {% else %}
{% if not teacher_profile  %}
<h1 style="text-align:center">This student is not enrolled to any courses!</h1>
{% endif %}
{% endif %}
        {% endif %}
          </div>
        </div>
      </div>
    </section>


      <section class="footer-dark wf-section" style="background-color:white">
  <div class="container-2">
    <div class="footer-wrapper">
      <a href="{% url 'about' %}" class="footer-brand w-inline-block">
        <img src="{% static 'landing/black_logo.png' %}" width="141px" height="40px" loading="lazy" alt="">
      </a>
      <div class="footer-content">
        <div class="footer-block">
          <div class="title-small">Company</div>
          <a href="#" class="footer-link">How it works</a>
          <a href="#" class="footer-link">Pricing</a>
          <a href="#" class="footer-link">Docs</a>
        </div>

        <div  class="footer-block">
          <div class="title-small">About</div>
          <a href="#" class="footer-link">Terms &amp; Conditions</a>
          <a href="#" class="footer-link">Privacy policy</a>
          <div class="footer-social-block">
          <a href="#" class="footer-social-link-2 w-inline-block">
                  <img src="{% static 'twitter_icon.svg' %}" loading="lazy" alt="" />
                </a>
                <a href="#" class="footer-social-link-2 w-inline-block">
                  <img src="{% static 'linkedin_icon.svg' %}" loading="lazy" alt="" />
                </a>
                <a href="#" class="footer-social-link-2 w-inline-block">
                  <img src="{% static 'facebook_icon.svg' %}" loading="lazy" alt="" />
                </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="footer-divider"></div>
  <div class="footer-copyright-center">Copyright © 2023 E-Learn company</div>
</section>

    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=63bdafe8bcdc8414831de73c" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="{% static 'js/basic_nav.js' %}" type="text/javascript"></script>

   <script>
      $(function(){$('[data-bs-toggle="popover"]').popover()})
    </script>
  </body>
</html>
